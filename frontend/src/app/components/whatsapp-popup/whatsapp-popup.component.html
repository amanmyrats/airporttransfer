<div class="popup-wrapper" *ngIf="showPopup" [ngClass]="position">
  <button
    type="button"
    class="whatsapp-pill"
    (click)="expandPopup()"
    *ngIf="!isExpanded"
  >
    <img
      [src]="'images/socialicons/' + socialIcons.whatsapp.image.name[currentLanguage.code]"
      [alt]="socialIcons.whatsapp.image.alt[currentLanguage.code]"
      class="pill-icon"
    />
    <span>{{ translations.needHelp[currentLanguage.code] }}</span>
  </button>

  <div class="popup-box" *ngIf="isExpanded">
    <div class="popup-content">
      <button class="close-btn" type="button" (click)="collapsePopup()" aria-label="Minimize WhatsApp helper">
        Ã—
      </button>

      <div class="popup-header">
        <img
          [src]="'images/socialicons/' + socialIcons.whatsapp.image.name[currentLanguage.code]"
          [alt]="socialIcons.whatsapp.image.alt[currentLanguage.code]"
          class="popup-icon"
        />
        <div>
          <h4>
            {{ translations.startChatForDiscount[currentLanguage.code] }}
          </h4>
          <p>
            {{ translations.chatWithSupport[currentLanguage.code] }}
          </p>
        </div>
      </div>

      <a [href]="getWhatsAppLink()" target="_blank" class="whatsapp-button" rel="noopener">
        <img
          [src]="'images/socialicons/' + socialIcons.whatsapp.image.name[currentLanguage.code]"
          [alt]="socialIcons.whatsapp.image.alt[currentLanguage.code]"
          class="button-icon"
        />
        {{ translations.startChat[currentLanguage.code] }}
      </a>

      <div class="actions">
        <button type="button" (click)="remindLater()">
          {{ translations.remindLater[currentLanguage.code] }}
        </button>
        <button type="button" (click)="dismissToday()">
          {{ translations.dontShow[currentLanguage.code] }}
        </button>
      </div>
    </div>
  </div>
</div>
