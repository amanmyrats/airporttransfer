<section class="reservation-detail-page">
    <div class="container">
      <!-- Left Section: Reservation Details -->
      <div class="reservation-details">
        <h2>Reservation Details</h2>
        <img [src]="'cars/vito.png'" [alt]="selectedCar?.name" class="car-image" />
        <p><strong>Car:</strong> {{ selectedCar?.name }}</p>
        <p><strong>From:</strong> {{ fromLocation }}</p>
        <p><strong>To:</strong> {{ toLocation }}</p>
        <p><strong>Distance:</strong> {{ distance }} km</p>
        <p><strong>Price:</strong> {{ price! }} {{ currency?.sign }}</p>
        <p><strong>Passengers:</strong> {{ passengerCount }}</p>
      </div>
  
      <!-- Right Section: Form -->
      <div class="reservation-form">
        <h2>Complete Your Reservation</h2>
        <form [formGroup]="bookingService.bookingCompletionForm" (ngSubmit)="onSubmit()">
          <!-- Travel and Flight Info -->
          <div class="form-group">
            <h3>Travel and Flight Information</h3>
            <div class="form-row">
              <div class="form-item">
                <label for="transfer_date">Transfer Date</label>
                <input type="date" id="transfer_date" formControlName="transfer_date" required />
                <p-message *ngIf="hasSubmitted && bookingService.bookingCompletionForm.get('transfer_date')?.invalid" severity="error" variant="simple" size="small">Transfer date is required</p-message>
              </div>
              <div class="form-item">
                <label for="transfer_time">Transfer Time</label>
                <input type="time" id="transfer_time" formControlName="transfer_time" required />
                <p-message *ngIf="hasSubmitted && bookingService.bookingCompletionForm.get('transfer_time')?.invalid" severity="error" variant="simple" size="small">Transfer Time is required</p-message>
              </div>
              <div class="form-item">
                <label for="flight_number">Flight Number</label>
                <input type="text" id="flight_number" formControlName="flight_number" placeholder="e.g., TK1234" />
              </div>
            </div>
            <label>
              <input type="checkbox" formControlName="is_round_trip" (change)="toggleReturnFields()" />
              Want Return?
            </label>
            <div *ngIf="bookingService.bookingCompletionForm.get('is_round_trip')?.value">
              <div class="form-row">
                <div class="form-item">
                  <label for="return_transfer_date">Return Date</label>
                  <input type="date" id="return_transfer_date" formControlName="return_transfer_date" />
                </div>
                <div class="form-item">
                  <label for="return_transfer_time">Return Time</label>
                  <input type="time" id="return_transfer_time" formControlName="return_transfer_time" />
                </div>
              </div>
            </div>
          </div>
  
          <!-- Extra Services -->
          <div class="form-group">
            <h3>Extra Services</h3>
            <label>
              <input type="checkbox" formControlName="need_greet_sign" />
              Greeter Service
            </label>
            <label>
              <input type="checkbox" formControlName="need_child_seat" />
              Child Seat
            </label>
            <label>
              <input type="checkbox" formControlName="extra_luggage" />
              Extra Luggage
            </label>
            <div class="form-item">
              <label for="note">Note</label>
              <textarea id="note" formControlName="note" rows="3" placeholder="Write any additional details..."></textarea>
            </div>
          </div>
  
          <!-- Personal Info -->
          <div class="form-group">
            <h3>Personal Information</h3>
            <div class="form-row">
              <div class="form-item">
                <label for="passenger_name">Name and Surname</label>
                <input type="text" id="passenger_name" formControlName="passenger_name" placeholder="Full Name" required />
                <p-message *ngIf="hasSubmitted && bookingService.bookingCompletionForm.get('passenger_name')?.invalid" severity="error" variant="simple" size="small">Full Name is required</p-message>
              </div>
              <div class="form-item">
                <label for="passenger_email">Email</label>
                <input type="email" id="passenger_email" formControlName="passenger_email" placeholder="Email Address" />
              </div>
              <div class="form-item">
                <label for="passenger_phone">Phone</label>
                <input type="tel" id="passenger_phone" formControlName="passenger_phone" placeholder="Primary Phone" required />
                <p-message *ngIf="hasSubmitted && bookingService.bookingCompletionForm.get('passenger_phone')?.invalid" severity="error" variant="simple" size="small">Mobile Phone is required</p-message>
              </div>
              <div class="form-item">
                <label for="passenger_additional_phone">Additional Phone</label>
                <input type="tel" id="passenger_additional_phone" formControlName="passenger_additional_phone" placeholder="Optional Phone" />
              </div>
            </div>
          </div>
  
          <!-- Complete Reservation -->
          <div class="form-actions">
            <p-message *ngIf="hasSubmitted && bookingService.bookingCompletionForm.invalid" severity="info" variant="simple" size="small">Please fill required fields</p-message>
            <button [hidden]="stepFromUrl == 3" type="button" class="btn-back" (click)="goToPreviousStep()">Back</button>
            <button pButton [loading]="isSaving" type="submit" class="btn-complete">Complete Reservation</button>
          </div>
        </form>
      </div>
    </div>
  </section>
  