<div class="change-password-card">

  <form [formGroup]="form" (ngSubmit)="submit()">
    <div class="p-grid p-fluid">
      <div class="p-col-12">
        <p-floatlabel variant="on">
          <p-password
            id="currentPassword"
            [feedback]="false"
            [toggleMask]="true"
            formControlName="old_password"
          />
          <label for="currentPassword">{{ copy.labels.current }}</label>
        </p-floatlabel>
        <span class="error-message" *ngIf="form.get('old_password')?.hasError('required') && form.get('old_password')?.touched">
          {{ copy.errors.currentRequired }}
        </span>
        <span class="error-message" *ngIf="serverErrors()['old_password']">
          {{ serverErrors()['old_password'] }}
        </span>
      </div>

      <div class="p-col-12">
        <p-floatlabel variant="on">
          <p-password
            id="newPassword"
            [feedback]="false"
            [toggleMask]="true"
            formControlName="new_password"
          />
          <label for="newPassword">{{ copy.labels.new }}</label>
        </p-floatlabel>
        <span class="error-message" *ngIf="form.get('new_password')?.hasError('required') && form.get('new_password')?.touched">
          {{ copy.errors.newRequired }}
        </span>
        <span class="error-message" *ngIf="form.get('new_password')?.hasError('minlength')">
          {{ copy.errors.newMinLength }}
        </span>
        <span class="error-message" *ngIf="serverErrors()['new_password']">
          {{ serverErrors()['new_password'] }}
        </span>
      </div>

      <div class="p-col-12">
        <p-floatlabel variant="on">
          <p-password
            id="confirmPassword"
            [feedback]="false"
            [toggleMask]="true"
            formControlName="confirm_password"
          />
          <label for="confirmPassword">{{ copy.labels.confirm }}</label>
        </p-floatlabel>
        <span class="error-message" *ngIf="form.get('confirm_password')?.hasError('required') && form.get('confirm_password')?.touched">
          {{ copy.errors.confirmRequired }}
        </span>
        <span class="error-message" *ngIf="form.get('confirm_password')?.hasError('passwordMismatch')">
          {{ copy.errors.confirmMismatch }}
        </span>
        <span class="error-message" *ngIf="serverErrors()['confirm_password']">
          {{ serverErrors()['confirm_password'] }}
        </span>
      </div>

      <div class="p-col-12">
        <button
          type="submit"
          pButton
          [label]="copy.submitLabel"
          [loading]="submitting()"
          [disabled]="form.invalid || submitting()"
        ></button>
      </div>
    </div>
  </form>
</div>
  
