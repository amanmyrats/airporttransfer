<app-super-header></app-super-header>
<app-navbar></app-navbar>

<main class="auth-page" aria-labelledby="login-title">
  <section class="auth-card" role="form">
    <h1 id="login-title">{{ copy.title }}</h1>
    <p class="auth-subtitle">{{ copy.subtitle }}</p>

    <p *ngIf="statusMessage()" class="alert" [class.alert--error]="statusMessage()?.type === 'error'" [class.alert--info]="statusMessage()?.type === 'info'">
      {{ statusMessage()?.text }}
    </p>

    <div class="social-buttons">
      <button
        type="button"
        class="btn btn-google"
        (click)="handleGoogleSignIn()"
        [disabled]="googleLoading() || loading()"
        [attr.aria-busy]="googleLoading()"
      >
        <span class="btn-spinner" *ngIf="googleLoading()" aria-hidden="true"></span>
        <span class="social-icon" aria-hidden="true">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" role="img">
            <path fill="#EA4335" d="M24 9.5c3.54 0 6 1.54 7.38 2.83l5.4-5.26C32.96 3.67 28.8 2 24 2 14.82 2 7.06 7.83 4.08 16.08l6.95 5.4C12.68 14.4 17.88 9.5 24 9.5z"/>
            <path fill="#34A853" d="M46.5 24.5c0-1.63-.14-3.2-.41-4.73H24v9h12.66c-.55 2.82-2.18 5.22-4.68 6.84l7.41 5.75C43.96 37.49 46.5 31.49 46.5 24.5z"/>
            <path fill="#4A90E2" d="M11.03 28.32a10.9 10.9 0 0 1-.57-3.32c0-1.16.21-2.3.55-3.34l-6.93-5.4A21.98 21.98 0 0 0 2 25c0 3.52.84 6.84 2.34 9.76l6.69-5.84z"/>
            <path fill="#FBBC05" d="M24 46c5.84 0 10.74-1.93 14.32-5.25l-7.41-5.75C29 36.64 26.65 37.5 24 37.5c-6.12 0-11.32-4.9-12.97-11.5l-6.95 5.4C7.06 40.17 14.82 46 24 46z"/>
          </svg>
        </span>
        <span class="social-label">{{ googleLoading() ? copy.submitBusy : copy.googleButton }}</span>
      </button>
      <button
        type="button"
        class="btn btn-facebook"
        (click)="handleFacebookSignIn()"
        [disabled]="facebookLoading() || loading()"
        [attr.aria-busy]="facebookLoading()"
      >
        <span class="btn-spinner" *ngIf="facebookLoading()" aria-hidden="true"></span>
        <span class="social-icon" aria-hidden="true">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" role="img">
            <path fill="#1877F2" d="M24 12.07C24 5.404 18.627 0 12 0S0 5.403 0 12.07C0 18.1 4.388 23.1 10.125 24v-8.437H7.078v-3.493h3.047V9.41c0-3.033 1.792-4.71 4.533-4.71 1.312 0 2.686.236 2.686.236v2.978h-1.513c-1.49 0-1.953.93-1.953 1.887v2.269h3.328l-.532 3.493h-2.796V24C19.612 23.1 24 18.1 24 12.07z"/>
          </svg>
        </span>
        <span class="social-label">{{ facebookLoading() ? copy.submitBusy : copy.facebookButton }}</span>
      </button>
      <button
        *ngIf="appleEnabled"
        type="button"
        class="btn btn-apple"
        (click)="handleAppleSignIn()"
        [disabled]="appleLoading() || loading()"
        [attr.aria-busy]="appleLoading()"
      >
        <span class="btn-spinner" *ngIf="appleLoading()" aria-hidden="true"></span>
        <span class="social-label">{{ appleLoading() ? copy.submitBusy : copy.appleButton }}</span>
      </button>
    </div>

    <p class="divider" role="presentation"><span>{{ copy.divider }}</span></p>

    <form [formGroup]="form" (ngSubmit)="submit()" novalidate class="form">
      <div class="form-field">
        <label for="email">{{ copy.emailLabel }}</label>
        <input id="email" type="email" formControlName="email" autocomplete="email" required />
        <p class="form-error" *ngIf="form.controls['email']?.invalid && form.controls['email']?.touched">{{ copy.emailError }}</p>
      </div>

      <div class="form-field">
        <label for="password">{{ copy.passwordLabel }}</label>
        <input id="password" type="password" formControlName="password" autocomplete="current-password" required />
        <p class="form-error" *ngIf="form.controls['password']?.invalid && form.controls['password']?.touched">{{ copy.passwordError }}</p>
      </div>

      <div class="form-row">
        <label class="checkbox">
          <input type="checkbox" formControlName="remember" id="remember" />
          <span>{{ copy.rememberMe }}</span>
        </label>
        <a [routerLink]="linkWithLang('auth/forgot-password')" class="link">{{ copy.forgotPassword }}</a>
      </div>

      <button type="submit" class="btn btn-primary" [disabled]="loading()">{{ loading() ? copy.submitBusy : copy.submitIdle }}</button>
    </form>

    <footer class="auth-footer">
      <p>{{ copy.footerPrompt }} <a [routerLink]="linkWithLang('auth/register')" class="link">{{ copy.registerLink }}</a></p>
    </footer>
  </section>
</main>

<app-footer></app-footer>
