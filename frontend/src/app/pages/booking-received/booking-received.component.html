<app-super-header></app-super-header>
<app-navbar></app-navbar>

<div class="reservation-success-page">
  <div class="success-container">
    <div class="success-icon">
      <i class="pi pi-check-circle"></i>
    </div>
    <h1 class="success-title">{{ pageCopy.successTitle }}</h1>
    <div class="next-steps" *ngIf="hasNextActions">
      <div class="next-steps__buttons">
        <button
          *ngFor="let checkout of checkoutLinks"
          type="button"
          class="btn-next primary"
          (click)="openCheckoutLink(checkout, $event)"
          [disabled]="isButtonLoading('checkout', checkout.reference)"
          [attr.aria-busy]="isButtonLoading('checkout', checkout.reference)"
        >
          <span>{{ checkout.label }}</span>
          <span class="btn-spinner" *ngIf="isButtonLoading('checkout', checkout.reference)" aria-hidden="true"></span>
        </button>
        <button
          *ngIf="dashboardCommands?.length"
          type="button"
          class="btn-next secondary"
          (click)="openDashboard($event)"
          [disabled]="isButtonLoading('dashboard', 'main')"
          [attr.aria-busy]="isButtonLoading('dashboard', 'main')"
        >
          <span>{{ pageCopy.nextSteps.dashboardButton }}</span>
          <span class="btn-spinner" *ngIf="isButtonLoading('dashboard', 'main')" aria-hidden="true"></span>
        </button>
        <ng-container *ngFor="let checkout of checkoutLinks">
          <button
            type="button"
            class="btn-next tertiary"
            (click)="openDetails(checkout, $event)"
            [disabled]="isButtonLoading('details', checkout.id || checkout.reference)"
            [attr.aria-busy]="isButtonLoading('details', checkout.id || checkout.reference)"
          >
            <span class="reservation-code">{{ checkout.reference }}</span>
            <span class="reservation-desc">{{ pageCopy.nextSteps.detailsButton }}</span>
            <span
              class="btn-spinner"
              *ngIf="isButtonLoading('details', checkout.id || checkout.reference)"
              aria-hidden="true"
            ></span>
          </button>
          <div class="reservation-code-copy">
            <span class="reservation-code">{{ checkout.reference }}</span>
            <button type="button" (click)="copyReference(checkout.reference)">
              <i class="pi" [ngClass]="copiedReference() === checkout.reference ? 'pi-check' : 'pi-copy'"></i>
              <span *ngIf="copiedReference() === checkout.reference">{{ pageCopy.nextSteps.copiedLabel }}</span>
              <span *ngIf="copiedReference() !== checkout.reference">{{ pageCopy.nextSteps.copyLabel }}</span>
            </button>
          </div>
        </ng-container>
      </div>
    </div>

    <p class="success-message" [innerHTML]="pageCopy.reservationIntro"></p>
    <p class="success-message">{{ pageCopy.reservationFollowUp }}</p>

    <div class="contact-info">
      <h2>{{ pageCopy.contactHeading }}</h2>
      <ul>
        <li>
          <strong>{{ pageCopy.contactLabels.whatsapp }}:</strong>
          <a href="{{ socialIcons.whatsapp.url }}" target="_blank">{{ socialIcons.phone.formatted }}</a>
        </li>
        <li>
          <strong>{{ pageCopy.contactLabels.telegram }}:</strong>
          <a href="{{ socialIcons.telegram.url }}" target="_blank">&#64;{{ socialIcons.telegram.username }}</a>
        </li>
        <li>
          <strong>{{ pageCopy.contactLabels.phone }}:</strong>
          <a href="tel:{{ socialIcons.phone.number }}">{{ socialIcons.phone.formatted }}</a>
        </li>
        <li>
          <strong>{{ pageCopy.contactLabels.email }}:</strong>
          <a href="mailto:{{ socialIcons.email.info }}">{{ socialIcons.email.info }}</a>
        </li>
        <li>
          <strong>{{ pageCopy.contactLabels.address }}:</strong>
          {{ socialIcons.location.address[currentLanguage.code] }}
        </li>
      </ul>
    </div>

    <div class="success-actions">
      <button
        type="button"
        class="btn-home"
        (click)="openHome($event)"
        [disabled]="isButtonLoading('home', 'root')"
        [attr.aria-busy]="isButtonLoading('home', 'root')"
      >
        <span>{{ pageCopy.homeButton }}</span>
        <span class="btn-spinner" *ngIf="isButtonLoading('home', 'root')" aria-hidden="true"></span>
      </button>
      <!-- <a href="/my-reservations" class="btn-my-reservations">View My Reservations</a> -->
    </div>
  </div>
</div>

<app-footer></app-footer>
